---
const steps = [
  {
    title: 'Inicio de Mision',
    body: 'Un viaje inmersivo por habilidades, experiencia y proyectos en formato scrollytelling.',
  },
  {
    title: 'Estudios',
    body: 'Formacion en informatica administrativa y bases solidas en desarrollo de software.',
  },
  {
    title: 'Experiencia',
    body: 'Roles recientes en desarrollo con stacks modernos y practicas profesionales.',
  },
  {
    title: 'Skills',
    body: 'Hard + soft skills visualizadas en barras y radar, con enfoque en impacto.',
  },
  {
    title: 'Proyectos',
    body: 'Espacio reservado para despliegues y casos clave.',
  },
];
---

<section class="scrolly">
  <div class="scrolly-sticky">
    <div class="scrolly-panel">
      <p class="scrolly-kicker">Scrollytelling</p>
      <h2 class="scrolly-title">Ruta Interactiva</h2>
      <p class="scrolly-desc">
        Desplazate para descubrir cada seccion en una narrativa espacial.
      </p>
      <div class="scrolly-status" data-scrolly-status>Step 1 / {steps.length}</div>
    </div>
  </div>

  <div class="scrolly-steps" data-scrolly-container>
    {steps.map((step, index) => (
      <article class="scrolly-step" data-step={index + 1}>
        <h3>{step.title}</h3>
        <p>{step.body}</p>
      </article>
    ))}
  </div>
</section>

<script type="module">
  import scrollama from 'scrollama';

  const scrollyContainer = document.querySelector('[data-scrolly-container]');
  const status = document.querySelector('[data-scrolly-status]');
  const steps = scrollyContainer ? scrollyContainer.querySelectorAll('.scrolly-step') : [];

  if (steps.length && status) {
    const scroller = scrollama();

    scroller
      .setup({
        step: '.scrolly-step',
        offset: 0.6,
        once: false,
      })
      .onStepEnter((response) => {
        steps.forEach((step) => step.classList.remove('is-active'));
        response.element.classList.add('is-active');
        status.textContent = `Step ${response.index + 1} / ${steps.length}`;
      });

    window.addEventListener('resize', () => scroller.resize());
  }
</script>

<style>
  .scrolly {
    display: grid;
    grid-template-columns: minmax(240px, 1fr) minmax(280px, 2fr);
    gap: 32px;
    align-items: start;
    margin-top: 6rem;
  }

  .scrolly-sticky {
    position: sticky;
    top: 96px;
    align-self: start;
    height: fit-content;
  }

  .scrolly-panel {
    border-radius: 24px;
    padding: 28px;
    background: rgba(8, 12, 24, 0.72);
    border: 1px solid rgba(125, 249, 255, 0.16);
    box-shadow: 0 24px 60px rgba(2, 4, 16, 0.55);
  }

  .scrolly-kicker {
    text-transform: uppercase;
    letter-spacing: 0.3em;
    font-size: 0.7rem;
    color: rgba(125, 249, 255, 0.7);
    margin-bottom: 0.75rem;
  }

  .scrolly-title {
    font-size: 2rem;
    margin: 0 0 0.75rem;
  }

  .scrolly-desc {
    color: rgba(230, 241, 255, 0.72);
    margin: 0 0 1.5rem;
  }

  .scrolly-status {
    font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size: 0.9rem;
    color: rgba(125, 249, 255, 0.85);
    border-top: 1px dashed rgba(125, 249, 255, 0.3);
    padding-top: 1rem;
  }

  .scrolly-steps {
    display: grid;
    gap: 24px;
  }

  .scrolly-step {
    min-height: 50vh;
    padding: 24px 26px;
    border-radius: 20px;
    background: rgba(9, 13, 26, 0.6);
    border: 1px solid transparent;
    transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.3s ease;
  }

  .scrolly-step h3 {
    margin: 0 0 0.5rem;
    font-size: 1.4rem;
  }

  .scrolly-step p {
    margin: 0;
    color: rgba(230, 241, 255, 0.7);
  }

  .scrolly-step.is-active {
    border-color: rgba(125, 249, 255, 0.4);
    box-shadow: 0 20px 50px rgba(2, 4, 16, 0.45), 0 0 30px rgba(125, 249, 255, 0.12);
    transform: translateY(-6px);
  }

  @media (max-width: 900px) {
    .scrolly {
      grid-template-columns: 1fr;
    }

    .scrolly-sticky {
      position: relative;
      top: 0;
    }

    .scrolly-step {
      min-height: auto;
    }
  }
</style>
